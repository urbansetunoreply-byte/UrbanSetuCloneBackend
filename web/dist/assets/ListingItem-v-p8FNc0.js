import{bh as g,ar as w,r as u,p as I,o as $,i as P,j as t,S as f,aw as _,L as k,y as b}from"./index-BKRdPXJO.js";import{m as L}from"./addressMasking-3vIUwCOC.js";function C(e){return g({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"},child:[]}]})(e)}function U({listing:e,onDelete:a,onWishToggle:o}){const{addToWishlist:N,removeFromWishlist:j,isInWishlist:x}=w(),[m,c]=u.useState(!1),l=I(),h=$(),{currentUser:r}=P(s=>s.user),n=h.pathname.includes("/admin");u.useEffect(()=>{c(x(e._id))},[x,e._id]);const y=async()=>{if(!r){b.info("Please sign in to add properties to your wishlist."),l("/sign-in");return}m?(await j(e._id),c(!1),typeof o=="function"&&o(e._id,!1)):(await N(e),c(!0),typeof o=="function"&&o(e._id,!0))},v=()=>{if(!r){b.info("Please sign in to book appointments."),l("/sign-in");return}const s=n?`/admin/appointmentlisting?listingId=${e._id}&listingType=${e.type}&propertyName=${encodeURIComponent(e.name)}&propertyDescription=${encodeURIComponent(e.description)}`:`/user/appointment?listingId=${e._id}&listingType=${e.type}&propertyName=${encodeURIComponent(e.name)}&propertyDescription=${encodeURIComponent(e.description)}`;l(s)},i=s=>`â‚¹${Number(s).toLocaleString("en-IN")}`,d=()=>e.offer&&e.regularPrice&&e.discountPrice?Math.round((e.regularPrice-e.discountPrice)/e.regularPrice*100):0;let p=`/listing/${e._id}`;return n?p=`/admin/listing/${e._id}`:h.pathname.startsWith("/user")&&(p=`/user/listing/${e._id}`),t.jsxs("div",{className:"relative bg-white shadow-md rounded-lg overflow-hidden p-1 sm:p-2 lg:p-4",children:[e.offer&&d()>0&&t.jsx("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 z-20",children:t.jsxs("span",{className:"bg-yellow-400 text-gray-900 text-xs font-semibold px-2 py-1 rounded-full shadow-md animate-pulse",title:"Limited-time offer!",children:[d(),"% OFF"]})}),n?a?t.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),a(e._id)},className:"absolute top-2 sm:top-4 right-2 sm:right-4 p-2 rounded-full transition z-20 bg-red-100 text-red-600 hover:bg-red-500 hover:text-white",title:"Delete property",children:t.jsx(f,{className:"text-base sm:text-lg"})}):null:t.jsx("button",{onClick:y,className:`absolute top-2 sm:top-4 right-2 sm:right-4 p-2 rounded-full transition z-20 ${m?"bg-red-500 text-white":"bg-gray-200 text-red-500"}`,title:m?"Remove from wishlist":"Add to wishlist",children:t.jsx(_,{className:"text-base sm:text-lg"})}),t.jsxs(k,{to:p,children:[e.imageUrls&&e.imageUrls.length>0?t.jsx("img",{src:e.imageUrls[0],alt:"home",className:"w-full h-28 sm:h-40 lg:h-48 object-cover rounded-md",onError:s=>{s.target.src="https://via.placeholder.com/400x300?text=No+Image",s.target.className="w-full h-28 sm:h-40 lg:h-48 object-cover rounded-md opacity-50"}}):t.jsx("div",{className:"w-full h-28 sm:h-40 lg:h-48 bg-gray-200 rounded-md flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("div",{className:"text-4xl mb-2",children:"ðŸ "}),t.jsx("p",{className:"text-sm",children:"No Image"})]})}),t.jsxs("div",{className:"p-2 sm:p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-gray-700 font-semibold text-base sm:text-lg truncate flex-1",children:e.name}),a&&!n&&t.jsxs("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),a(e._id)},className:"ml-2 p-1 rounded-full bg-red-100 text-red-600 hover:bg-red-500 hover:text-white transition-all flex items-center gap-1 text-xs",title:"Remove from watchlist",children:[t.jsx(f,{className:"text-xs"}),t.jsx("span",{className:"hidden sm:inline",children:"Remove"})]})]}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1 mt-1",children:[t.jsx(C,{className:"text-red-500"}),t.jsx("p",{className:"truncate",children:L(e.propertyNumber||e.city?{propertyNumber:e.propertyNumber,landmark:e.landmark,city:e.city,district:e.district,state:e.state,pincode:e.pincode}:e.address,!!r)})]}),t.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mt-2 truncate",children:e.description}),t.jsx("div",{className:"mt-2",children:e.offer&&d()>0?t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("p",{className:"text-base sm:text-lg font-bold text-blue-500",children:[i(e.discountPrice),e.type==="rent"&&" / month"]}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 line-through",children:i(e.regularPrice)})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:"text-xs sm:text-sm text-green-600 font-semibold bg-green-50 px-2 py-1 rounded-full",children:["Save â‚¹",(e.regularPrice-e.discountPrice).toLocaleString("en-IN")]}),t.jsxs("span",{className:"text-xs sm:text-sm text-green-600 font-semibold",children:["(",d(),"% off)"]})]})]}):t.jsxs("p",{className:"text-base sm:text-lg font-bold text-blue-500",children:[i(e.regularPrice),e.type==="rent"&&" / month"]})}),t.jsxs("div",{className:"flex space-x-2 sm:space-x-4 text-gray-600 text-xs sm:text-sm mt-2",children:[t.jsx("p",{children:e.bedrooms>1?`${e.bedrooms} beds`:`${e.bedrooms} bed`}),t.jsx("p",{children:e.bathrooms>1?`${e.bathrooms} bathrooms`:`${e.bathrooms} bathroom`})]}),t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.offer&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:"Special Offer"})})]})]}),t.jsx("div",{className:"mt-2 sm:mt-4",children:r&&r._id===e.userRef?t.jsx("div",{className:"w-full text-red-500 font-semibold text-center py-2 sm:py-3 rounded-lg bg-red-50 border border-red-200",children:"You cannot book an appointment for your own property."}):t.jsx("button",{onClick:v,className:"w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg font-semibold flex items-center justify-center gap-2 text-sm sm:text-base",children:"ðŸ“… Book Appointment"})})]})}export{U as L};
