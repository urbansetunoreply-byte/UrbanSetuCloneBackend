import{u as Ne,p as we,i as ve,r as n,j as e,aQ as Se,aR as K,a3 as Y,G as Q,l as Pe,av as Ae,aS as Ce,Z as X,aG as A,S as ke,aT as Le,_ as Ie,L as _e,aU as Te,am as Fe,a5 as De,y as h}from"./index-D5SGkqik.js";import{L as Re}from"./ListingItem-DV8RfBtd.js";import"./addressMasking-3vIUwCOC.js";const y="https://urbansetu.onrender.com",Be=()=>{Ne("My Wishlist - Saved Properties");const q=we(),{currentUser:g}=ve(s=>s.user),[c,N]=n.useState([]),[ee,D]=n.useState([]),[se,R]=n.useState(new Map),[te,$]=n.useState(!0),[w,ae]=n.useState(""),[E,re]=n.useState("dateAdded"),[C,le]=n.useState("all"),[W,B]=n.useState(!1),[v,M]=n.useState(""),[U,V]=n.useState([]),[O,z]=n.useState(!1),[k,S]=n.useState([]),[ie,u]=n.useState(!1),[L,G]=n.useState(!1),[d,f]=n.useState([]),[P,I]=n.useState(!1),[b,H]=n.useState("grid"),[_,ne]=n.useState(!1),[m,Z]=n.useState({totalValue:0,averagePrice:0,priceRange:{min:0,max:0},typeDistribution:{},cityDistribution:{}}),ce=async()=>{if(g!=null&&g._id){$(!0);try{const s=await fetch(`${y}/api/wishlist/user/${g._id}`,{credentials:"include"});if(s.ok){const t=await s.json();D(t);const r=t.filter(i=>i.listingId).map(i=>i.listingId);N(r);const l=new Map;t.forEach(i=>{i.listingId&&i.effectivePriceAtAdd!=null&&l.set(i.listingId._id,i.effectivePriceAtAdd)}),R(l)}}catch{}finally{$(!1)}}};n.useEffect(()=>{ce()},[g==null?void 0:g._id]),n.useEffect(()=>{he()},[c]);const oe=(s,t)=>{t||(N(r=>r.filter(l=>l._id!==s)),D(r=>r.filter(l=>{var i;return(((i=l.listingId)==null?void 0:i._id)||l.listingIdRaw)!==s})))},T=async(s=v)=>{if(s.trim()){z(!0);try{const t=await fetch(`${y}/api/listing/get?search=${encodeURIComponent(s)}&limit=20`,{credentials:"include"});if(t.ok){const r=await t.json();V(r),S(r.slice(0,5))}}catch(t){console.error("Error searching properties:",t),h.error("Failed to search properties")}finally{z(!1)}}},de=async s=>{if(!s.trim()||s.length<2){S([]),u(!1);return}G(!0);try{const t=await fetch(`${y}/api/listing/get?search=${encodeURIComponent(s)}&limit=5`,{credentials:"include"});if(t.ok){const r=await t.json();S(r),u(!0)}}catch(t){console.error("Error fetching suggestions:",t)}finally{G(!1)}},xe=s=>{const t=s.target.value;M(t),de(t)},me=s=>{M(s.name),u(!1),S([]),T(s.name)},pe=async s=>{var t;try{const r=await fetch(`${y}/api/wishlist/add`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({listingId:s._id})});if(r.ok){const l=await r.json();N(a=>[s,...a]),V(a=>a.filter(o=>o._id!==s._id));const i=((t=l==null?void 0:l.wishlistItem)==null?void 0:t.effectivePriceAtAdd)??null;i!=null&&R(a=>new Map(a).set(s._id,i)),h.success("Added to wishlist")}else{const l=await r.json();h.error(l.message||"Failed to add to wishlist")}}catch(r){console.error("Error adding to wishlist:",r),h.error("Failed to add to wishlist")}},F=s=>c.some(t=>t._id===s),he=()=>{if(c.length===0){Z({totalValue:0,averagePrice:0,priceRange:{min:0,max:0},typeDistribution:{},cityDistribution:{}});return}const s=c.map(o=>o.regularPrice||0).filter(o=>o>0),t=s.reduce((o,x)=>o+x,0),r=s.length>0?t/s.length:0,l={min:s.length>0?Math.min(...s):0,max:s.length>0?Math.max(...s):0},i=c.reduce((o,x)=>(o[x.type]=(o[x.type]||0)+1,o),{}),a=c.reduce((o,x)=>{const j=x.city||"Unknown";return o[j]=(o[j]||0)+1,o},{});Z({totalValue:t,averagePrice:r,priceRange:l,typeDistribution:i,cityDistribution:a})},ge=()=>{d.length===p.length?f([]):f(p.map(s=>s._id))},ue=async()=>{if(d.length!==0)try{const s=d.map(t=>fetch(`${y}/api/wishlist/remove/${t}`,{method:"DELETE",credentials:"include"}));await Promise.all(s),N(t=>t.filter(r=>!d.includes(r._id))),f([]),I(!1),h.success(`${d.length} properties removed from wishlist`)}catch{h.error("Failed to remove some properties")}},fe=()=>{const s=p.map(a=>({name:a.name,type:a.type,price:a.regularPrice,discountPrice:a.discountPrice,city:a.city,state:a.state,bedrooms:a.bedrooms,bathrooms:a.bathrooms,addedDate:new Date(a.createdAt).toLocaleDateString()})),t=[["Property Name","Type","Price","Discount Price","City","State","Bedrooms","Bathrooms","Added Date"],...s.map(a=>[a.name,a.type,a.price,a.discountPrice||"",a.city,a.state,a.bedrooms,a.bathrooms,a.addedDate])].map(a=>a.join(",")).join(`
`),r=new Blob([t],{type:"text/csv"}),l=window.URL.createObjectURL(r),i=document.createElement("a");i.href=l,i.download=`wishlist-${new Date().toISOString().split("T")[0]}.csv`,i.click(),window.URL.revokeObjectURL(l),h.success("Wishlist exported successfully")},be=()=>{const s=`Check out my wishlist with ${c.length} properties!`,t=window.location.href;navigator.share?navigator.share({title:"My Property Wishlist",text:s,url:t}):(navigator.clipboard.writeText(`${s} ${t}`),h.success("Wishlist link copied to clipboard"))},p=c.filter(s=>{var l,i,a;const t=((l=s.name)==null?void 0:l.toLowerCase().includes(w.toLowerCase()))||((i=s.city)==null?void 0:i.toLowerCase().includes(w.toLowerCase()))||((a=s.state)==null?void 0:a.toLowerCase().includes(w.toLowerCase())),r=C==="all"||s.type===C;return t&&r}).sort((s,t)=>{switch(E){case"price-low":return(s.regularPrice||0)-(t.regularPrice||0);case"price-high":return(t.regularPrice||0)-(s.regularPrice||0);case"name":return(s.name||"").localeCompare(t.name||"");case"dateAdded":default:return new Date(t.createdAt||0)-new Date(s.createdAt||0)}}),je=s=>s?(s.offer&&s.discountPrice?s.discountPrice:s.regularPrice)??null:null,ye=s=>{const t=ee.find(x=>{var j,J;return((J=((j=x.listingId)==null?void 0:j._id)||x.listingIdRaw)==null?void 0:J.toString())===s._id}),r=(t==null?void 0:t.addedAt)||(t==null?void 0:t.createdAt)||null,l=se.get(s._id)??(t==null?void 0:t.effectivePriceAtAdd)??null,i=je(s);let a=null,o="neutral";return l!=null&&i!=null&&(a=i-l,o=a<0?"dropped":a>0?"increased":"neutral"),{addedAt:r,baseline:l,current:i,change:a,status:o}};return te?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading your wishlist..."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen py-2 sm:py-10 px-1 sm:px-2 md:px-8 overflow-x-hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-2 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"text-3xl text-purple-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-purple-700",children:"My Wishlist"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.length," of ",c.length," properties",m.totalValue>0&&e.jsxs("span",{className:"ml-2 text-purple-600 font-semibold",children:["‚Ä¢ Total Value: ‚Çπ",m.totalValue.toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>H("grid"),className:`p-2 rounded ${b==="grid"?"bg-white shadow":"text-gray-500"}`,title:"Grid View",children:e.jsx(K,{className:"text-sm"})}),e.jsx("button",{onClick:()=>H("list"),className:`p-2 rounded ${b==="list"?"bg-white shadow":"text-gray-500"}`,title:"List View",children:e.jsx(K,{className:"rotate-90 text-sm"})})]}),e.jsxs("button",{onClick:()=>ne(!_),className:`px-2 sm:px-3 py-2 rounded-lg transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm ${_?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Y,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Stats"})]}),c.length>0&&e.jsxs("button",{onClick:()=>I(!P),className:`px-2 sm:px-3 py-2 rounded-lg transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm ${P?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Q,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Select"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:fe,className:"px-2 sm:px-3 py-2 rounded-lg bg-green-100 text-green-700 hover:bg-green-200 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",disabled:c.length===0,children:[e.jsx(Pe,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs("button",{onClick:be,className:"px-2 sm:px-3 py-2 rounded-lg bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",disabled:c.length===0,children:[e.jsx(Ae,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),e.jsxs("button",{onClick:()=>B(!W),className:"bg-purple-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(Ce,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Properties"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]})]}),W&&e.jsxs("div",{className:"mb-6 bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800",children:"Search and Add Properties"}),e.jsx("button",{onClick:()=>B(!1),className:"text-purple-600 hover:text-purple-800",children:e.jsx(X,{className:"text-lg"})})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search properties by name, city, or state...",value:v,onChange:xe,onKeyPress:s=>s.key==="Enter"&&T(),onFocus:()=>v.length>=2&&u(!0),onBlur:()=>setTimeout(()=>u(!1),200),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),ie&&(k.length>0||L)&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:[L?e.jsxs("div",{className:"p-3 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-1 text-sm",children:"Searching..."})]}):k.map(s=>{var t;return e.jsx("div",{onClick:()=>me(s),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.imageUrls&&s.imageUrls.length>0?e.jsx("img",{src:s.imageUrls[0],alt:s.name,className:"w-12 h-12 object-cover rounded-md",onError:r=>{r.target.src="https://via.placeholder.com/48x48?text=No+Image"}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-lg",children:"üè†"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-800 truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:[s.city,", ",s.state]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.type," ‚Ä¢ ",s.bedrooms," bed",s.bedrooms!==1?"s":""," ‚Ä¢ ‚Çπ",(t=s.regularPrice)==null?void 0:t.toLocaleString("en-IN")]})]})]})},s._id)}),k.length===0&&!L&&e.jsx("div",{className:"p-3 text-center text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No properties found"})})]})]}),e.jsx("button",{onClick:T,disabled:O||!v.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{}),"Search"]})})]}),U.length>0&&e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:U.map(s=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.city,", ",s.state]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.type," ‚Ä¢ ",s.bedrooms," bed",s.bedrooms!==1?"s":""," ‚Ä¢ ‚Çπ",(t=s.regularPrice)==null?void 0:t.toLocaleString("en-IN")]})]}),e.jsx("button",{onClick:()=>pe(s),disabled:F(s._id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${F(s._id)?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:F(s._id)?"Added":"Add to Wishlist"})]},s._id)})})]}),_&&c.length>0&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg border border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center gap-2",children:[e.jsx(Y,{className:"text-purple-600"}),"Wishlist Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Properties"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:c.length})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Average Price"}),e.jsxs("p",{className:"text-sm sm:text-2xl font-bold text-green-600",children:["‚Çπ",m.averagePrice.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm col-span-2 lg:col-span-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Price Range"}),e.jsxs("p",{className:"text-xs sm:text-lg font-bold text-blue-600",children:["‚Çπ",m.priceRange.min.toLocaleString("en-IN")," - ‚Çπ",m.priceRange.max.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm col-span-2 lg:col-span-1",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Value"}),e.jsxs("p",{className:"text-sm sm:text-2xl font-bold text-indigo-600",children:["‚Çπ",m.totalValue.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"By Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(m.typeDistribution).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${t/c.length*100}%`}})}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:t})]})]},s))})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"By City"}),e.jsx("div",{className:"space-y-2",children:Object.entries(m.cityDistribution).sort((s,t)=>t[1]-s[1]).slice(0,5).map(([s,t])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:`${t/c.length*100}%`}})}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:t})]})]},s))})]})]})]}),P&&e.jsx("div",{className:"mb-6 bg-red-50 p-3 sm:p-4 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("button",{onClick:ge,className:"flex items-center justify-center gap-2 px-3 py-2 bg-white rounded-lg border border-gray-300 hover:bg-gray-50 text-sm",children:[e.jsx(Q,{className:"text-sm"}),d.length===p.length?"Deselect All":"Select All"]}),e.jsxs("span",{className:"text-sm text-gray-600 text-center sm:text-left",children:[d.length," of ",p.length," selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ue,disabled:d.length===0,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm",children:[e.jsx(ke,{className:"text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Remove Selected"}),e.jsx("span",{className:"sm:hidden",children:"Remove"})]}),e.jsxs("button",{onClick:()=>{I(!1),f([])},className:"px-3 sm:px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2 text-sm",children:[e.jsx(X,{className:"text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]})]})]})}),c.length>0&&e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search properties by name, city, or state...",value:w,onChange:s=>ae(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"text-gray-500"}),e.jsxs("select",{value:C,onChange:s=>le(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"sale",children:"For Sale"}),e.jsx("option",{value:"rent",children:"For Rent"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"text-gray-500"}),e.jsxs("select",{value:E,onChange:s=>re(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"dateAdded",children:"Date Added"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"name",children:"Name: A to Z"})]})]})]})]}),c.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16",children:[e.jsx("div",{className:"text-6xl sm:text-8xl mb-4",children:"üîñ"}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2",children:"Your wishlist is empty"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add properties to compare prices later."}),e.jsxs(_e,{to:"/search",className:"inline-flex items-center gap-2 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(A,{}),"Browse Properties"]})]}):p.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üîç"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No properties found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]}):e.jsx("div",{className:b==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6":"space-y-4 overflow-x-hidden",children:p.map(s=>{const t=ye(s),r=t&&t.baseline!=null&&t.current!=null;return t.status==="dropped"||t.status,e.jsxs("div",{className:`relative group ${b==="list"?"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm border w-full overflow-hidden":""}`,children:[e.jsxs("div",{className:"absolute top-2 left-2 z-10",children:[t.status==="dropped"&&e.jsxs("span",{className:"bg-green-500 text-white text-[10px] sm:text-xs font-semibold px-2 py-1 rounded-full shadow-md flex items-center gap-1",children:[e.jsx(Te,{className:"text-[10px] sm:text-xs"})," Price dropped"]}),t.status==="increased"&&e.jsxs("span",{className:"bg-red-500 text-white text-[10px] sm:text-xs font-semibold px-2 py-1 rounded-full shadow-md flex items-center gap-1",children:[e.jsx(Fe,{className:"text-[10px] sm:text-xs"})," Price up"]})]}),P&&e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",checked:d.includes(s._id),onChange:()=>f(l=>l.includes(s._id)?l.filter(i=>i!==s._id):[...l,s._id]),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"})}),e.jsxs("div",{className:b==="list"?"flex-1":"",children:[e.jsx(Re,{listing:s,onWishToggle:oe}),r&&e.jsx("div",{className:"mt-2 px-2 py-2 bg-gray-50 border rounded-md text-xs sm:text-sm flex flex-wrap items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(De,{className:"text-gray-500"}),e.jsxs("span",{children:["Added: ",t.addedAt?new Date(t.addedAt).toLocaleDateString():"-"]})]})})]})]},s._id)})})]}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsxs("button",{onClick:()=>q("/user/watchlist"),className:"relative group w-16 h-16 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-110 flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},title:"Open Watchlist",children:[e.jsx("span",{className:"w-7 h-7 text-white text-2xl",children:"üëÅÔ∏è"}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-3 bg-white text-gray-800 text-sm px-4 py-2 rounded-xl shadow-2xl hidden group-hover:block z-10 whitespace-nowrap border border-gray-100 transform -translate-y-1 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"üëÅÔ∏è"}),e.jsx("span",{className:"font-medium",children:"Watchlist"})]}),e.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})]})]})})]})};export{Be as default};
