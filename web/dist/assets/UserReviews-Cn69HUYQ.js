import{u as ve,i as Ne,r as o,Q as I,j as e,b as k,aR as ee,a3 as se,c4 as te,b5 as we,L as ae,aS as re,aG as Re,aT as Se,y as g,_ as Ce,H as Ie,S as v,Z as le,G as ne}from"./index-C5FYe_cc.js";import{R as ke}from"./ReviewForm-CIeETfJQ.js";const V="https://urbansetu.onrender.com";function Pe(){var Y;ve("My Reviews - Property Reviews");const{currentUser:u}=Ne(s=>s.user),[d,f]=o.useState([]),[A,_]=o.useState(!0),[W,H]=o.useState(""),[y,P]=o.useState(null),[Z,ie]=o.useState(""),[D,oe]=o.useState(""),[F,$]=o.useState(!1),[x,E]=o.useState(null),[de,T]=o.useState(!1),[L,U]=o.useState(null),[c,q]=o.useState({totalReviews:0,pendingReviews:0,approvedReviews:0,rejectedReviews:0,removedReviews:0,averageRating:0,ratingDistribution:{},monthlyTrends:[],topProperties:[],sentiment:{positive:0,negative:0,neutral:0}}),[M,ce]=o.useState(!1),[m,Q]=o.useState("grid"),[J,me]=o.useState("dateAdded"),[z,xe]=o.useState(!1);o.useEffect(()=>(F||y?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[F,y]),o.useEffect(()=>{B()},[]),o.useEffect(()=>{try{window.scrollTo({top:0,left:0,behavior:"auto"}),document.documentElement.scrollTop=0,document.body.scrollTop=0}catch{}},[]),o.useEffect(()=>{ge()},[d]),o.useEffect(()=>{const s=t=>{!u||t.userId!==u._id||f(n=>t.status==="removed"?n.map(l=>l._id===t._id?{...l,...t}:l):t._deleted?n.filter(l=>l._id!==t._id):n.map(l=>l._id===t._id?{...l,...t}:l))};I.on("reviewUpdated",s);const r=t=>{f(n=>n.map(b=>b.userId===t.userId?{...b,userName:t.username,userAvatar:t.avatar}:b))};return I.on("profileUpdated",r),()=>{I.off("reviewUpdated",s),I.off("profileUpdated",r)}},[u]),o.useEffect(()=>{const s=setInterval(async()=>{if(u)try{const r=await fetch(`${V}/api/user/id/${u._id}`);if(r.ok){const t=await r.json();(t.username!==u.username||t.avatar!==u.avatar)&&f(n=>n.map(l=>l.userId===t._id?{...l,userName:t.username,userAvatar:t.avatar}:l))}}catch(r){console.error("[UserReviews] Error polling for profile updates:",r)}},3e4);return()=>clearInterval(s)},[u]);const B=async()=>{try{_(!0);const s=await fetch(`${V}/api/review/user`,{credentials:"include"}),r=await s.json();s.ok?f(r):H(r.message||"Failed to fetch reviews")}catch(s){console.error("Error fetching reviews:",s),H("Network error. Please try again.")}finally{_(!1)}},ge=()=>{if(d.length===0){q({totalReviews:0,pendingReviews:0,approvedReviews:0,rejectedReviews:0,removedReviews:0,averageRating:0,ratingDistribution:{},monthlyTrends:[],topProperties:[],sentiment:{positive:0,negative:0,neutral:0}});return}const s=d.length,r=d.filter(a=>a.status==="pending").length,t=d.filter(a=>a.status==="approved").length,n=d.filter(a=>a.status==="rejected").length,l=d.filter(a=>a.status==="removed"||a.status==="removed_by_user").length,G=d.reduce((a,i)=>a+(i.rating||0),0)/s,j={};d.forEach(a=>{const i=a.rating||0;j[i]=(j[i]||0)+1});const p={};d.forEach(a=>{const i=new Date(a.createdAt).toISOString().substring(0,7);p[i]=(p[i]||0)+1});const h={};d.forEach(a=>{if(a.listingId){const i=typeof a.listingId=="object"?a.listingId._id:a.listingId,C=typeof a.listingId=="object"?a.listingId.name:"Unknown Property";h[i]||(h[i]={name:C,count:0,avgRating:0,totalRating:0}),h[i].count++,h[i].totalRating+=a.rating||0}}),Object.values(h).forEach(a=>{a.avgRating=a.totalRating/a.count});const N=Object.values(h).sort((a,i)=>i.count-a.count).slice(0,5),w=d.filter(a=>a.rating>=4).length,R=d.filter(a=>a.rating<=2).length,S=d.filter(a=>a.rating===3).length;q({totalReviews:s,pendingReviews:r,approvedReviews:t,rejectedReviews:n,removedReviews:l,averageRating:G,ratingDistribution:j,monthlyTrends:Object.entries(p).sort(([a],[i])=>a.localeCompare(i)).map(([a,i])=>({month:a,count:i})),topProperties:N,sentiment:{positive:w,negative:R,neutral:S}})},pe=s=>{if(!s||!s._id){g.error("This review cannot be deleted (missing identifier).");return}if((s==null?void 0:s.status)==="removed"){U(s),T(!0);return}E(s),$(!0)},he=async()=>{var s;if(x)try{if(!x._id){g.error("Invalid review. Please refresh and try again.");return}const r=await fetch(`${V}/api/review/delete/${x._id}`,{method:"DELETE",credentials:"include"}),t=await r.json();r.ok?((s=t==null?void 0:t.updatedReview)==null?void 0:s.status)==="removed"||(t==null?void 0:t.status)==="removed"?(f(n=>n.map(l=>l._id===x._id?{...l,status:"removed"}:l)),g.success("Review marked as removed")):t!=null&&t._deleted||t!=null&&t.deleted||typeof(t==null?void 0:t.message)=="string"&&t.message.toLowerCase().includes("deleted")?(f(n=>n.filter(l=>l._id!==x._id)),g.success("Review deleted successfully")):(f(n=>n.map(l=>l._id===x._id?{...l,status:"removed"}:l)),g.info("Review tagged as removed")):g.error(t.message||"Failed to delete review")}catch{g.error("Network error. Please try again.")}finally{$(!1),E(null)}},ue=()=>{L&&(f(s=>s.filter(r=>r._id!==L._id)),T(!1),U(null),g.success("Review removed from your list"))},fe=s=>{P(s)},be=()=>{P(null),B(),g.success("Review updated successfully")},ye=async()=>{try{_(!0),await B(),g.success("Reviews refreshed successfully")}catch{g.error("Failed to refresh reviews")}},K=s=>[...Array(5)].map((r,t)=>e.jsx(k,{className:`text-lg ${t<s?"text-yellow-400":"text-gray-300"}`},t)),X=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),je=s=>{if(!s)return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"});const t={pending:{color:"bg-yellow-100 text-yellow-800",icon:ne},approved:{color:"bg-green-100 text-green-800",icon:ne},rejected:{color:"bg-red-100 text-red-800",icon:le},removed:{color:"bg-gray-100 text-gray-800",icon:le}}[s];if(!t)return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:s.charAt(0).toUpperCase()+s.slice(1)});const n=t.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.color}`,children:[e.jsx(n,{className:"mr-1"}),s.charAt(0).toUpperCase()+s.slice(1)]})},O=d.filter(s=>{var h,N,w,R,S,a,i,C;if(D&&s.status!==D)return!1;const r=((N=(h=s.listingId)==null?void 0:h.name)==null?void 0:N.toLowerCase())||"",t=((R=(w=s.listingId)==null?void 0:w.city)==null?void 0:R.toLowerCase())||"",n=((a=(S=s.listingId)==null?void 0:S.state)==null?void 0:a.toLowerCase())||"",l=String(s.rating),b=((i=s.comment)==null?void 0:i.toLowerCase())||"",G=((C=s.adminNote)==null?void 0:C.toLowerCase())||"",j=X(s.createdAt).toLowerCase(),p=Z.toLowerCase();return r.includes(p)||t.includes(p)||n.includes(p)||l===p||b.includes(p)||G.includes(p)||j.includes(p)||p===""}).sort((s,r)=>{var t,n;switch(J){case"rating":return(r.rating||0)-(s.rating||0);case"property":const l=((t=s.listingId)==null?void 0:t.name)||"",b=((n=r.listingId)==null?void 0:n.name)||"";return l.localeCompare(b);case"dateAdded":default:return new Date(r.createdAt)-new Date(s.createdAt)}});return A?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading your reviews..."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen py-2 sm:py-10 px-1 sm:px-2 md:px-8 overflow-x-hidden",children:[e.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-2 sm:p-4 lg:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{className:"text-3xl text-blue-700"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-blue-700",children:"My Reviews"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[O.length," of ",d.length," reviews",c.totalReviews>0&&e.jsxs("span",{className:"ml-2 text-blue-600 font-semibold",children:["â€¢ Avg Rating: ",c.averageRating.toFixed(1)," â­"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>Q("grid"),className:`p-2 rounded ${m==="grid"?"bg-white shadow":"text-gray-500"}`,title:"Grid View",children:e.jsx(ee,{className:"text-sm"})}),e.jsx("button",{onClick:()=>Q("list"),className:`p-2 rounded ${m==="list"?"bg-white shadow":"text-gray-500"}`,title:"List View",children:e.jsx(ee,{className:"rotate-90 text-sm"})})]}),e.jsxs("button",{onClick:()=>ce(!M),className:`px-2 sm:px-3 py-2 rounded-lg transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm ${M?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(se,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]}),e.jsxs("button",{onClick:()=>xe(!z),className:`px-2 sm:px-3 py-2 rounded-lg transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm ${z?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(te,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Stats"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:ye,disabled:A,className:"px-2 sm:px-3 py-2 rounded-lg bg-green-100 text-green-700 hover:bg-green-200 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm disabled:opacity-50",children:[e.jsx(we,{className:`text-xs sm:text-sm ${A?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),e.jsxs(ae,{to:"/search",className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(re,{className:"text-xs sm:text-sm"}),e.jsx("span",{className:"hidden sm:inline",children:"Write Review"}),e.jsx("span",{className:"sm:hidden",children:"Review"})]})]})]})]}),M&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center gap-2",children:[e.jsx(se,{className:"text-blue-600"}),"Review Analytics"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:c.totalReviews})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Average Rating"}),e.jsxs("p",{className:"text-sm sm:text-2xl font-bold text-green-600",children:[c.averageRating.toFixed(1)," â­"]})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:c.approvedReviews})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:c.pendingReviews})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Rating Distribution"}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(s=>{const r=c.ratingDistribution[s]||0,t=c.totalReviews>0?r/c.totalReviews*100:0;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 w-6",children:[e.jsx("span",{className:"text-xs font-medium",children:s}),e.jsx(k,{className:"text-yellow-400 text-xs"})]}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),e.jsx("span",{className:"text-xs text-gray-600 w-8 text-right",children:r})]},s)})})]})})]}),z&&d.length>0&&e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg border border-purple-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"text-purple-600"}),"Review Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:c.totalReviews})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Average Rating"}),e.jsxs("p",{className:"text-sm sm:text-2xl font-bold text-green-600",children:[c.averageRating.toFixed(1)," â­"]})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:c.approvedReviews})]}),e.jsxs("div",{className:"bg-white p-3 sm:p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-lg sm:text-2xl font-bold text-yellow-600",children:c.pendingReviews})]})]}),c.topProperties.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Most Reviewed Properties"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.topProperties.map((s,r)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full font-medium",children:["#",r+1]}),e.jsx("h5",{className:"font-semibold text-gray-800 truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"text-yellow-400 text-sm"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.avgRating.toFixed(1)})]}),e.jsx("span",{className:"text-sm text-gray-500",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.count," reviews"]})]})]})})},r))})]})]}),d.length>0&&e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by property name, city, state, review comment, admin note, or review date...",value:Z,onChange:s=>ie(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"text-gray-500"}),e.jsxs("select",{value:D,onChange:s=>{oe(s.target.value),s.target.value?g.info(`Filtered by status: ${s.target.value}`):g.info("Showing all reviews")},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"removed",children:"Removed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"text-gray-500"}),e.jsxs("select",{value:J,onChange:s=>me(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"dateAdded",children:"Date Added"}),e.jsx("option",{value:"rating",children:"Rating: High to Low"}),e.jsx("option",{value:"property",children:"Property: A to Z"})]})]})]})]}),W&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-800",children:W})}),d.length===0?e.jsxs("div",{className:"text-center py-10 sm:py-16",children:[e.jsx("div",{className:"text-6xl sm:text-8xl mb-4",children:"â­"}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Share your property experiences with the community."}),e.jsxs(ae,{to:"/search",className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(re,{}),"Browse Properties"]})]}):O.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ”"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria."})]}):e.jsx("div",{className:m==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6":"space-y-4 overflow-x-hidden",children:O.map(s=>{var r,t,n;return e.jsx("div",{className:`relative group ${m==="list"?"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm border w-full overflow-hidden":""}`,children:e.jsx("div",{className:m==="list"?"flex-1":"",children:e.jsx("div",{className:`border border-gray-200 rounded-lg hover:shadow-md transition-shadow ${m==="grid"?"p-3 h-full flex flex-col":"p-3 sm:p-6 overflow-x-auto"} mb-4`,children:e.jsxs("div",{className:"flex flex-col gap-2 sm:gap-4 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[je(s.status),e.jsx("span",{className:"text-sm text-gray-500",children:X(s.createdAt)})]}),e.jsxs("div",{className:`flex items-center gap-2 mb-3 ${m==="grid"?"justify-center":""}`,children:[e.jsx("div",{className:"flex items-center gap-1",children:K(s.rating)}),e.jsxs("span",{className:"text-gray-600 font-medium text-sm",children:[s.rating," star",s.rating>1?"s":""]})]}),e.jsx("p",{className:`text-gray-700 mb-3 ${m==="grid"?"text-sm line-clamp-2":"line-clamp-3"}`,children:s.comment}),s.listingId&&e.jsxs("div",{className:`bg-gray-50 rounded-lg ${m==="grid"?"p-2":"p-3"}`,children:[e.jsx("h4",{className:`font-semibold text-gray-800 ${m==="grid"?"text-sm":""}`,children:e.jsx("a",{href:`/user/listing/${s.listingId&&typeof s.listingId=="object"?s.listingId._id:s.listingId}`,className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:(r=s.listingId)==null?void 0:r.name})}),e.jsxs("p",{className:`text-gray-600 ${m==="grid"?"text-xs":"text-sm"}`,children:[(t=s.listingId)==null?void 0:t.city,", ",(n=s.listingId)==null?void 0:n.state]})]}),s.adminNote&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Admin Note:"})," ",s.adminNote]})})]}),e.jsxs("div",{className:`flex gap-2 lg:flex-shrink-0 w-full sm:w-auto ${m==="grid"?"flex-col justify-center mt-3":"flex-col mt-4"}`,children:[e.jsxs("button",{onClick:()=>fe(s),className:`flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition shadow ${m==="grid"?"px-3 py-2 text-sm w-full":"px-4 py-2"}`,children:[e.jsx(Ie,{}),"Edit"]}),e.jsxs("button",{onClick:()=>pe(s),className:`flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg hover:from-red-600 hover:to-pink-600 transition shadow ${m==="grid"?"px-3 py-2 text-sm w-full":"px-4 py-2"}`,children:[e.jsx(v,{}),"Delete"]})]})]})})})},s._id)})})]}),e.jsx("div",{className:"fixed bottom-8 right-8 z-50",children:e.jsxs("button",{onClick:()=>window.location.href="/user/watchlist",className:"relative group w-16 h-16 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-110 flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500",style:{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},title:"Open Watchlist",children:[e.jsx("span",{className:"w-7 h-7 text-white text-2xl",children:"ðŸ‘ï¸"}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-3 bg-white text-gray-800 text-sm px-4 py-2 rounded-xl shadow-2xl hidden group-hover:block z-10 whitespace-nowrap border border-gray-100 transform -translate-y-1 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ‘ï¸"}),e.jsx("span",{className:"font-medium",children:"Watchlist"})]}),e.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-xs sm:max-w-md w-full",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-2 sm:mb-4",children:"Edit Review"}),e.jsx(ke,{listingId:typeof y.listingId=="object"?y.listingId._id:y.listingId,existingReview:y,onReviewSubmitted:be}),e.jsx("button",{onClick:()=>P(null),className:"mt-4 w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Cancel"})]})})}),F&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"text-red-500"}),"Delete Review"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete this review? This action cannot be undone."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[K(x.rating),e.jsxs("span",{className:"text-sm text-gray-600",children:[x.rating," star",x.rating>1?"s":""]})]}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:x.comment}),x.listingId&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Property: ",(Y=x.listingId)==null?void 0:Y.name]})]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{$(!1),E(null)},className:"px-4 py-2 rounded bg-gray-200 text-gray-800 font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:he,className:"px-4 py-2 rounded bg-red-600 text-white font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(v,{size:12}),"Delete Review"]})]})]})})}),de&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"text-red-500"}),"Remove From List"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This review is already tagged as removed. Do you want to remove it from your reviews list permanently?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{T(!1),U(null)},className:"px-4 py-2 rounded bg-gray-200 text-gray-800 font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:ue,className:"px-4 py-2 rounded bg-red-600 text-white font-semibold hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(v,{size:12}),"Remove Permanently"]})]})]})})})]})}export{Pe as default};
