import{u as Oe,r as t,p as Ie,o as Fe,i as qe,t as ye,j as e,O as Ve,G as re,H as je,L as ve,C as De,v as Ne,w as Pe,I as Me,J as $e,K as He,M as Ue,z as le,N as ze}from"./index-DFkuEFH9.js";import{R as J}from"./RecaptchaWidget-BO_fhMlv.js";const ne="https://urbansetu.onrender.com";function _e({bootstrapped:ie,sessionChecked:oe}){Oe("Reset Password - Forgot Password");const K=t.useRef(null),W=t.useRef(null),[Y,_]=t.useState(1),[l,Q]=t.useState({email:"",newPassword:"",confirmPassword:"",userId:""}),[u,Se]=t.useState({score:0,level:"very-weak",feedback:[]}),[G,Ce]=t.useState(!1),[X,Re]=t.useState(!1),[E,p]=t.useState(""),[de,v]=t.useState(""),[d,N]=t.useState(!1),w=Ie(),x=Fe(),{currentUser:T}=qe(s=>s.user),[j,k]=t.useState(""),[c,L]=t.useState(!1),[m,Z]=t.useState(!1),[h,ce]=t.useState(!1),[A,i]=t.useState(""),[o,ee]=t.useState(!1),[P,me]=t.useState(!1),[ue,O]=t.useState(!1),[S,C]=t.useState(0),[xe,R]=t.useState(!0),[f,I]=t.useState(null),[F,b]=t.useState(""),[q,y]=t.useState(!1),[V,D]=t.useState(0),[Ee,fe]=t.useState(!1),M=t.useRef(null),[Te,se]=t.useState(0),[he,ge]=t.useState(!1),[te,$]=t.useState(!1),[pe,H]=t.useState("");t.useEffect(()=>{const s=new URLSearchParams(x.search);s.get("step")==="2"&&(_(2),I(null),b(""),y(!1),se(0),ge(!1));const n=s.get("email");n&&!l.email&&Q(r=>({...r,email:n}))},[x.search]),t.useEffect(()=>{Y===1&&K.current&&ye(K.current)},[Y]),t.useEffect(()=>{c&&!o&&W.current&&ye(W.current)},[c,o]),t.useEffect(()=>{let s=null;return S>0&&(s=setInterval(()=>{C(a=>a<=1?(R(!0),0):a-1)},1e3)),()=>{s&&clearInterval(s)}},[S]),t.useEffect(()=>{const s=r=>{new URLSearchParams(x.search).get("step")==="2"&&sessionStorage.setItem("resetPasswordInterrupted","true")},a=r=>{new URLSearchParams(x.search).get("step")};return sessionStorage.getItem("resetPasswordInterrupted")==="true"&&(sessionStorage.removeItem("resetPasswordInterrupted"),new URLSearchParams(x.search).get("step")),window.addEventListener("beforeunload",s),window.addEventListener("popstate",a),()=>{window.removeEventListener("beforeunload",s),window.removeEventListener("popstate",a)}},[x.search,l.userId,w]),t.useEffect(()=>()=>{new URLSearchParams(x.search).get("step")==="2"&&sessionStorage.setItem("resetPasswordInterrupted","true")},[x.search]),t.useEffect(()=>{ie&&oe&&T&&(T.role==="admin"||T.role==="rootadmin"?w("/admin",{replace:!0}):w("/user",{replace:!0}))},[ie,oe,T,w]);const ke=s=>{const a=ze(s);Se(a)},ae=s=>{const{id:a,value:n}=s.target;Q({...l,[a]:n}),a==="email"&&(P?(ee(!1),L(!1),k(""),i(""),C(0),R(!0),me(!1)):o||(L(!1),k(""),i(""),C(0),R(!0))),a==="newPassword"&&ke(n)},we=async()=>{if(!l.email){i("Please enter an email address first");return}if(xe){Z(!0),i("");try{const s=await le(`${ne}/api/auth/send-forgot-password-otp`,{method:"POST",body:JSON.stringify({email:l.email,...f?{recaptchaToken:f}:{}})});if(s.status===403){let n="This account is temporarily suspended. Please reach out to support for help.";try{const r=await s.clone().json();r&&r.message&&r.message.toLowerCase().includes("suspended")&&(n="This account is temporarily suspended. Please reach out to support for help.")}catch{}i(n),Z(!1);return}const a=await s.json();if(a.success)L(!0),O(!0),v("OTP sent successfully to your email"),setTimeout(()=>v(""),3e3),C(30),R(!1),$(!1),H("");else{const n=(a.message||"").toLowerCase(),r=a.requiresCaptcha||n.includes("recaptcha");n.includes("too many requests")||n.includes("try again in 15 minutes")?($(!1),H(""),i("Too many requests. Please try again in 15 minutes.")):r?($(!0),c?i(a.message||"reCAPTCHA verification is required due to multiple failed attempts or requests"):(H("reCAPTCHA verification is required due to multiple failed attempts or requests"),i(""))):i(a.message),O(!1)}}catch{i("Failed to send OTP. Please try again."),O(!1)}finally{Z(!1)}}},be=async()=>{if(!j){i("Please enter the OTP");return}ce(!0),i("");try{const a=await(await le(`${ne}/api/auth/verify-otp`,{method:"POST",body:JSON.stringify({email:l.email,otp:j})})).json();a.success&&a.type==="forgotPassword"?(ee(!0),Q(n=>({...n,userId:a.userId})),v("Email verified successfully!"),setTimeout(()=>v(""),3e3)):i(a.message)}catch{i("Failed to verify OTP. Please try again.")}finally{ce(!1)}},Le=async s=>{if(s.preventDefault(),!o){p("Please verify your email with OTP before proceeding.");return}if(!f){p("Please complete the reCAPTCHA verification.");return}_(2),w("/forgot-password?step=2",{replace:!0})},U=s=>{console.log("reCAPTCHA verified:",s),I(s),b(""),fe(!0),setTimeout(()=>fe(!1),1e3),setTimeout(()=>y(!1),1e3),te&&setTimeout(()=>{$(!1),H(""),i("")},1e3)},z=()=>{I(null),b("reCAPTCHA expired. Please verify again."),D(s=>s+1),y(!0)},B=s=>{I(null),b("reCAPTCHA verification failed. Please try again."),D(a=>a+1),y(!0)},Ae=async s=>{if(s.preventDefault(),N(!0),p(""),b(""),l.newPassword!==l.confirmPassword){p("Passwords do not match"),N(!1);return}try{const a={userId:l.userId,newPassword:l.newPassword,confirmPassword:l.confirmPassword,...q&&f&&{recaptchaToken:f}};console.log("Reset password request:",{hasRecaptchaToken:!!f,showRecaptcha:q,failedAttempts:Te});const r=await(await le(`${ne}/api/auth/reset-password`,{method:"POST",body:JSON.stringify(a)})).json();r.success===!1?(console.log("Reset password failed:",r.message),r.message.includes("reCAPTCHA verification is required")?(console.log("Showing reCAPTCHA widget"),b(r.message),y(!0),D(g=>g+1),se(3)):r.message.includes("Multiple failed reset attempts")?(console.log("Account locked"),ge(!0),p(r.message),y(!1)):r.message.includes("reCAPTCHA verification failed")?(console.log("reCAPTCHA verification failed"),b(r.message),y(!0),D(g=>g+1)):(console.log("Regular error, tracking attempt"),se(g=>g+1),p(r.message)),N(!1)):(v("Password reset successful. You can now log in."),setTimeout(()=>{w("/sign-in")},2e3),N(!1))}catch{p("Something went wrong. Please try again."),N(!1)}};return new URLSearchParams(x.search).get("step")==="2"&&!l.userId?e.jsx(Ve,{}):Y===1?e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-orange-600 to-red-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),e.jsx("div",{className:"relative z-10 flex flex-col justify-center items-center text-white p-12",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6 animate-fade-in",children:"Reset Your Password"}),e.jsx("p",{className:"text-xl mb-8 leading-relaxed animate-fade-in-delay",children:`"Don't worry, we've got you covered. Let's get you back to finding your dream home."`}),e.jsxs("div",{className:"space-y-4 text-lg animate-fade-in-delay-2",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),e.jsx("span",{children:"Secure Password Reset"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("span",{children:"Quick & Easy Process"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}}),e.jsx("span",{children:"Back to Your Account"})]})]})]})}),e.jsx("div",{className:"absolute top-20 left-20 w-16 h-16 bg-white bg-opacity-10 rounded-full animate-float"}),e.jsx("div",{className:"absolute bottom-32 right-16 w-12 h-12 bg-white bg-opacity-10 rounded-full animate-float",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/2 right-24 w-8 h-8 bg-white bg-opacity-10 rounded-full animate-float",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black bg-opacity-20 flex items-center justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-white opacity-30",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-4 sm:p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Enter your registered email to reset your password."})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-8 border border-gray-100",children:[e.jsxs("form",{onSubmit:Le,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Registered Email",o&&e.jsx("span",{className:"ml-2 text-green-600",children:e.jsx(re,{className:"inline"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",id:"email",ref:K,value:l.email,onChange:ae,readOnly:(ue||o||c)&&!P||m,disabled:m,className:`w-full px-4 py-3 pr-24 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${o&&!P||m?"bg-gray-100 cursor-not-allowed border-green-500":o?"border-green-500":"border-gray-300"}`,required:!0}),!o&&!c&&e.jsx("button",{type:"button",onClick:we,disabled:m||!l.email||!xe,className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-orange-600 text-white rounded-md text-sm font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed z-10",children:m?"Sending...":"Send OTP"}),(ue||o||c)&&!P&&!m&&e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{me(!0),L(!1),O(!1),k(""),R(!0),C(0),ee(!1)},className:"text-blue-600 hover:text-blue-800 transition-colors duration-200 p-1 rounded hover:bg-blue-50",title:"Edit email",children:e.jsx(je,{className:"text-sm"})}),e.jsx("div",{className:"text-green-600",children:e.jsx(re,{className:"text-xl"})})]}),o&&P&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"text-green-600",children:e.jsx(re,{className:"text-xl"})})})]}),te&&!c&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{ref:M,onVerify:U,onExpire:z,onError:B,disabled:m,className:"transform scale-90"},`otp-email-${V}`)}),pe&&e.jsx("p",{className:"text-red-500 text-sm mt-2 text-center",children:pe})]}),c&&!o&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["OTP sent to ",l.email]}),A&&!c&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:A})]}),c&&!o&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP"}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter 6-digit OTP",id:"otp",ref:W,value:j,disabled:h,onChange:s=>{const a=s.target.value.replace(/[^0-9]/g,"");k(a)},onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),j&&j.length===6&&!h&&be())},className:`flex-1 px-3 py-2 sm:px-4 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 text-sm sm:text-base ${h?"bg-gray-100 cursor-not-allowed":""}`,maxLength:"6"}),e.jsx("button",{type:"button",onClick:be,disabled:h||j.length!==6,className:"px-3 py-2 sm:px-4 sm:py-3 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 text-sm sm:text-base whitespace-nowrap",children:h?"Verifying...":"Verify"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Enter the 6-digit code sent to your email"}),e.jsx("div",{className:"flex items-center gap-2",children:S>0?e.jsxs("span",{className:"text-xs text-gray-500",children:["Resend in ",Math.floor(S/60),":",(S%60).toString().padStart(2,"0")]}):e.jsx("button",{type:"button",onClick:we,disabled:m||h,className:"text-xs text-orange-600 hover:text-orange-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Sending...":"Resend OTP"})})]}),A&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:A}),te&&e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx(J,{ref:M,onVerify:U,onExpire:z,onError:B,disabled:m,className:"transform scale-90"},`otp-forgot-${V}`)})]}),(!f||Ee)&&e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(J,{ref:M,onVerify:U,onExpire:z,onError:B,disabled:d,className:"transform scale-90"},V)}),F&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:F})}),e.jsx("button",{disabled:d||!o||!f,className:"w-full py-3 px-4 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-lg hover:from-orange-700 hover:to-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Verifying..."]}):"Continue to Reset Password"}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:E})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Remember your password?"," ",e.jsx(ve,{to:"/sign-in",className:`text-orange-600 hover:text-orange-800 font-semibold hover:underline transition-colors duration-200 ${h?"opacity-50 cursor-not-allowed pointer-events-none":""}`,children:"Sign In"})]})})]})]})}),e.jsx(De,{})]}):e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 to-teal-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),e.jsx("div",{className:"relative z-10 flex flex-col justify-center items-center text-white p-12",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("h1",{className:"text-4xl font-bold mb-6 animate-fade-in",children:"Create New Password"}),e.jsx("p",{className:"text-xl mb-8 leading-relaxed animate-fade-in-delay",children:'"A strong password is your first line of defense. Make it count!"'}),e.jsxs("div",{className:"space-y-4 text-lg animate-fade-in-delay-2",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),e.jsx("span",{children:"Strong & Secure"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),e.jsx("span",{children:"Easy to Remember"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}}),e.jsx("span",{children:"Ready to Use"})]})]})]})}),e.jsx("div",{className:"absolute top-20 left-20 w-16 h-16 bg-white bg-opacity-10 rounded-full animate-float"}),e.jsx("div",{className:"absolute bottom-32 right-16 w-12 h-12 bg-white bg-opacity-10 rounded-full animate-float",style:{animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/2 right-24 w-8 h-8 bg-white bg-opacity-10 rounded-full animate-float",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-black bg-opacity-20 flex items-center justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-white opacity-30",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"üîë Reset Password"}),e.jsx("p",{className:"text-gray-600",children:"Create a new strong password to secure your account."})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("form",{onSubmit:Ae,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",value:l.email,disabled:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed text-gray-600",readOnly:!0}),e.jsx("button",{type:"button",onClick:()=>{_(1),w("/forgot-password?step=1",{replace:!0})},className:"absolute inset-y-0 right-3 flex items-center text-blue-600 hover:text-blue-800 transition-colors duration-200",title:"Edit email address",children:e.jsx(je,{className:"text-lg"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click the edit icon to change your email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"(Enter your new strong password)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:G?"text":"password",placeholder:"Create a strong password",id:"newPassword",value:l.newPassword,onChange:ae,disabled:d,className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ${d?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center cursor-pointer",onClick:()=>Ce(!G),children:G?e.jsx(Ne,{className:"text-gray-600"}):e.jsx(Pe,{className:"text-gray-600"})})]})]}),l.newPassword&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password Strength:"}),e.jsx("span",{className:`text-sm font-semibold ${$e(u.level)}`,children:Me(u.level)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u.level==="very-weak"?"bg-red-500 w-1/5":u.level==="weak"?"bg-red-400 w-2/5":u.level==="medium"?"bg-yellow-400 w-3/5":u.level==="strong"?"bg-green-400 w-4/5":"bg-green-500 w-full"}`})}),u.feedback.length>0&&e.jsxs("div",{className:`p-3 rounded-lg ${He(u.level)}`,children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"To improve your password:"}),e.jsx("ul",{className:"text-xs space-y-1",children:u.feedback.map((s,a)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"‚Ä¢"}),s]},a))})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["üí° ",e.jsx("strong",{children:"Tip:"})," Use a unique password for this account"]}),e.jsxs("p",{children:["üîí ",e.jsx("strong",{children:"Security:"})," Consider using a password manager"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"(Re-enter your new password)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:X?"text":"password",placeholder:"Confirm your password",id:"confirmPassword",value:l.confirmPassword,onChange:ae,disabled:d,className:`w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ${d?"bg-gray-100 cursor-not-allowed":""}`,required:!0}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center cursor-pointer",onClick:()=>Re(!X),children:X?e.jsx(Ne,{className:"text-gray-600"}):e.jsx(Pe,{className:"text-gray-600"})})]})]}),q&&e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{ref:M,onVerify:U,onExpire:z,onError:B,className:"mb-4"},V)}),F&&e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-red-600 text-sm text-center",children:F})}),he&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm text-center font-medium",children:"Multiple failed reset attempts. Please try again later."})}),e.jsx("button",{disabled:d||!Ue(l.newPassword)||q&&!f||he,className:"w-full py-3 px-4 bg-gradient-to-r from-green-600 to-teal-600 text-white font-semibold rounded-lg hover:from-green-700 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105",children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Resetting..."]}):"‚û°Ô∏è Reset Password"}),E&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:E})}),de&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-600 text-sm",children:de})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Remembered your password?"," ",e.jsx(ve,{to:"/sign-in",className:`text-green-600 hover:text-green-800 font-semibold hover:underline transition-colors duration-200 ${h||d?"opacity-50 cursor-not-allowed pointer-events-none":""}`,children:"Back to Sign In"})]})})]})]})})]})}export{_e as default};
