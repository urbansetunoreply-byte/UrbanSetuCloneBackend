import{u as O,o as Q,p as q,r as u,j as a,q as V,C as Y}from"./index-AwWxf1fH.js";import{L as z}from"./ListingItem-Cp5-rgXZ.js";import{G as X}from"./GeminiAIWrapper-B0HqR0LI.js";import{L as aa}from"./LocationSelector-C3s9mesM.js";import"./addressMasking-3vIUwCOC.js";import"./linkFormatter-D7tFnnq6.js";import"./countries_states_cities-CCOM4uJJ.js";const $="https://urbansetu.onrender.com";function da(){O("Search Properties - Find Your Dream Home");const w=Q(),S=q(),[h,p]=u.useState({searchTerm:"",type:"all",parking:!1,furnished:!1,offer:!1,sort:"createdAt",order:"desc",minPrice:"",maxPrice:"",city:"",state:"",bedrooms:"",bathrooms:""}),[b,P]=u.useState([]),[v,L]=u.useState(!1),[J,N]=u.useState(!1),[M,U]=u.useState(null),[G,C]=u.useState({state:"",district:"",city:""}),[R,ra]=u.useState([]),[H,W]=u.useState("");u.useEffect(()=>{const e=new URLSearchParams(w.search);p({searchTerm:e.get("searchTerm")||"",type:e.get("type")||"all",parking:e.get("parking")==="true",furnished:e.get("furnished")==="true",offer:e.get("offer")==="true",sort:e.get("sort")||"createdAt",order:e.get("order")||"desc",minPrice:e.get("minPrice")||"",maxPrice:e.get("maxPrice")||"",city:e.get("city")||"",state:e.get("state")||"",bedrooms:e.get("bedrooms")||"",bathrooms:e.get("bathrooms")||""}),C({state:e.get("state")||"",district:e.get("district")||"",city:e.get("city")||""}),(async()=>{L(!0),U(null);try{const r=await fetch(`${$}/api/listing/get?${e.toString()}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const l=await r.json();P(Array.isArray(l)?l:[]),N(Array.isArray(l)&&l.length>8)}catch(r){console.error("Error fetching listings:",r),U("Failed to load listings. Please try again."),P([]),N(!1)}L(!1)})()},[w.search]);const d=e=>{const{name:s,value:r,checked:l,type:m}=e.target;p(g=>({...g,[s]:m==="checkbox"?l:r}))},E=e=>{e.preventDefault();const s=(h.searchTerm||"").trim(),r={...h},l=c=>{const A={mumbai:"Maharashtra",pune:"Maharashtra",nagpur:"Maharashtra",delhi:"Delhi","new delhi":"Delhi",bengaluru:"Karnataka",bangalore:"Karnataka",mysuru:"Karnataka",chennai:"Tamil Nadu",coimbatore:"Tamil Nadu",kolkata:"West Bengal",hyderabad:"Telangana",ahmedabad:"Gujarat",surat:"Gujarat",jaipur:"Rajasthan",lucknow:"Uttar Pradesh",kanpur:"Uttar Pradesh",gurgaon:"Haryana",gurugram:"Haryana",indore:"Madhya Pradesh",bhopal:"Madhya Pradesh",patna:"Bihar"},x=(c||"").toLowerCase();return A[x]||""},m=s.match(/(\d+)\s*(bhk|bed|beds)/i);m&&(r.bedrooms=m[1]);const g=s.match(/(?:under|below)\s*(\d[\d,]*)/i);g&&(r.maxPrice=g[1].replace(/,/g,""));const k=s.match(/near\s+([a-zA-Z ]+)/i);k&&(r.city=k[1].trim());const f=s.match(/\b(rent|sale)\b/i);f&&(r.type=f[1].toLowerCase()),r.city&&!r.state&&(r.state=l(r.city));const K=["andhra pradesh","arunachal pradesh","assam","bihar","chhattisgarh","goa","gujarat","haryana","himachal pradesh","jharkhand","karnataka","kerala","madhya pradesh","maharashtra","manipur","meghalaya","mizoram","nagaland","odisha","punjab","rajasthan","sikkim","tamil nadu","telangana","tripura","uttar pradesh","uttarakhand","west bengal","delhi"],T=s.toLowerCase(),y=K.find(c=>new RegExp(`(^|\\b)${c}(\\b|$)`).test(T));y&&(r.state=y.replace(/\b\w/g,c=>c.toUpperCase()));const B=new URLSearchParams(r);S(`?${B.toString()}`)},_=e=>{e.preventDefault();const s=(H||"").trim();if(!s)return;const r={...h};(t=>{const i=t.toLowerCase(),n={search:/(?:find|search|look for|looking for|need|want|require|dhundh|khoj|chahiye)/i,rent:/(?:rent|rental|renting|for rent|to rent|kiran|bhada|rent par)/i,buy:/(?:buy|purchase|sale|selling|for sale|to buy|kharid|bechne|sale par)/i,budget:/(?:budget|affordable|cheap|low cost|economical|paisa|dam|rate)/i,location:/(?:near|close to|around|in|at|from|paas|mein|se)/i,size:/(?:room|bedroom|bhk|bed|bath|bathroom|toilet|kamra|washroom)/i,amenities:/(?:parking|furnished|unfurnished|garden|balcony|lift|security|gym|pool|ac|air conditioning)/i};return{detectedIntent:Object.keys(n).find(I=>n[I].test(t)),query:i}})(s);const m=t=>{const i={mumbai:"Maharashtra",pune:"Maharashtra",nagpur:"Maharashtra",nashik:"Maharashtra",aurangabad:"Maharashtra",solapur:"Maharashtra",amravati:"Maharashtra",kolhapur:"Maharashtra",sangli:"Maharashtra",malegaon:"Maharashtra",ulhasnagar:"Maharashtra",jalgaon:"Maharashtra",akola:"Maharashtra",latur:"Maharashtra",dhule:"Maharashtra",ahmednagar:"Maharashtra",chandrapur:"Maharashtra",parbhani:"Maharashtra",ichalkaranji:"Maharashtra",jalna:"Maharashtra",bhusawal:"Maharashtra",ambad:"Maharashtra",yavatmal:"Maharashtra",kamptee:"Maharashtra",gondia:"Maharashtra",barshi:"Maharashtra",achalpur:"Maharashtra",osmanabad:"Maharashtra",nandurbar:"Maharashtra",wardha:"Maharashtra",udgir:"Maharashtra",hinganghat:"Maharashtra",delhi:"Delhi","new delhi":"Delhi",gurgaon:"Haryana",gurugram:"Haryana",faridabad:"Haryana",ghaziabad:"Uttar Pradesh",sonipat:"Haryana",panipat:"Haryana",rohtak:"Haryana",karnal:"Haryana",hisar:"Haryana",ambala:"Haryana",yamunanagar:"Haryana",bhiwani:"Haryana",rewari:"Haryana",palwal:"Haryana",mahendragarh:"Haryana",jind:"Haryana",kaithal:"Haryana",fatehabad:"Haryana",sirsa:"Haryana",mewat:"Haryana",bengaluru:"Karnataka",bangalore:"Karnataka",mysuru:"Karnataka",mysore:"Karnataka",mangalore:"Karnataka",hubli:"Karnataka",belgaum:"Karnataka",gulbarga:"Karnataka",davangere:"Karnataka",bellary:"Karnataka",bijapur:"Karnataka",shimoga:"Karnataka",tumkur:"Karnataka",raichur:"Karnataka",bidar:"Karnataka",hospet:"Karnataka",hassan:"Karnataka",gadag:"Karnataka",udupi:"Karnataka",karwar:"Karnataka",chitradurga:"Karnataka",kolar:"Karnataka",mandya:"Karnataka",chikmagalur:"Karnataka",gangavati:"Karnataka",bagalkot:"Karnataka",ranebennur:"Karnataka",athani:"Karnataka",chennai:"Tamil Nadu",coimbatore:"Tamil Nadu",madurai:"Tamil Nadu",tiruchirapalli:"Tamil Nadu",salem:"Tamil Nadu",tirunelveli:"Tamil Nadu",tiruppur:"Tamil Nadu",erode:"Tamil Nadu",vellore:"Tamil Nadu",thoothukkudi:"Tamil Nadu",dindigul:"Tamil Nadu",thanjavur:"Tamil Nadu",ranipet:"Tamil Nadu",sivakasi:"Tamil Nadu",karur:"Tamil Nadu",udhagamandalam:"Tamil Nadu",hosur:"Tamil Nadu",nagercoil:"Tamil Nadu",kanchipuram:"Tamil Nadu",cuddalore:"Tamil Nadu",kumbakonam:"Tamil Nadu",tiruvannamalai:"Tamil Nadu",pollachi:"Tamil Nadu",rajapalayam:"Tamil Nadu",gudiyatham:"Tamil Nadu",pudukkottai:"Tamil Nadu",neyveli:"Tamil Nadu",ambattur:"Tamil Nadu",kolkata:"West Bengal",howrah:"West Bengal",durgapur:"West Bengal",asansol:"West Bengal",siliguri:"West Bengal",malda:"West Bengal",berhampore:"West Bengal",habra:"West Bengal",kharagpur:"West Bengal",shantipur:"West Bengal",dankuni:"West Bengal",dhulian:"West Bengal",ranaghat:"West Bengal",haldia:"West Bengal",raiganj:"West Bengal",krishnanagar:"West Bengal",nabadwip:"West Bengal",medinipur:"West Bengal",jalpaiguri:"West Bengal",balurghat:"West Bengal",basirhat:"West Bengal",bankura:"West Bengal",chakdaha:"West Bengal",darjeeling:"West Bengal",hyderabad:"Telangana",warangal:"Telangana",nizamabad:"Telangana",khammam:"Telangana",karimnagar:"Telangana",ramagundam:"Telangana",mahbubnagar:"Telangana",nalgonda:"Telangana",adilabad:"Telangana",suryapet:"Telangana",miryalaguda:"Telangana",tadepalligudem:"Telangana",mancherial:"Telangana",kothagudem:"Telangana",dharmabad:"Telangana",bhongir:"Telangana",bodhan:"Telangana",palwancha:"Telangana",mandamarri:"Telangana",koratla:"Telangana",sircilla:"Telangana",tandur:"Telangana",siddipet:"Telangana",wanaparthy:"Telangana",ahmedabad:"Gujarat",surat:"Gujarat",vadodara:"Gujarat",rajkot:"Gujarat",bhavnagar:"Gujarat",jamnagar:"Gujarat",nadiad:"Gujarat",porbandar:"Gujarat",anand:"Gujarat",morbi:"Gujarat",mahesana:"Gujarat",bharuch:"Gujarat",veraval:"Gujarat",navsari:"Gujarat",gandhidham:"Gujarat",jaipur:"Rajasthan",jodhpur:"Rajasthan",udaipur:"Rajasthan",kota:"Rajasthan",bikaner:"Rajasthan",ajmer:"Rajasthan",bharatpur:"Rajasthan",bhiwadi:"Rajasthan",alwar:"Rajasthan",beawar:"Rajasthan",dungarpur:"Rajasthan",hindaun:"Rajasthan",gangapur:"Rajasthan",laxmangarh:"Rajasthan",sikar:"Rajasthan",pali:"Rajasthan",tonk:"Rajasthan",kishangarh:"Rajasthan",banswara:"Rajasthan",hanumangarh:"Rajasthan",dausa:"Rajasthan",churu:"Rajasthan",bundi:"Rajasthan","sawai madhopur":"Rajasthan",lucknow:"Uttar Pradesh",kanpur:"Uttar Pradesh",agra:"Uttar Pradesh",varanasi:"Uttar Pradesh",meerut:"Uttar Pradesh",allahabad:"Uttar Pradesh",bareilly:"Uttar Pradesh",gorakhpur:"Uttar Pradesh",moradabad:"Uttar Pradesh",aligarh:"Uttar Pradesh",saharanpur:"Uttar Pradesh",noida:"Uttar Pradesh",firozabad:"Uttar Pradesh",jhansi:"Uttar Pradesh",muzaffarnagar:"Uttar Pradesh",mathura:"Uttar Pradesh",shahjahanpur:"Uttar Pradesh",rampur:"Uttar Pradesh",modinagar:"Uttar Pradesh",hapur:"Uttar Pradesh",etawah:"Uttar Pradesh",mirzapur:"Uttar Pradesh",bulandshahr:"Uttar Pradesh",sambhal:"Uttar Pradesh",amroha:"Uttar Pradesh",hardoi:"Uttar Pradesh",fatehpur:"Uttar Pradesh",raebareli:"Uttar Pradesh",indore:"Madhya Pradesh",bhopal:"Madhya Pradesh",gwalior:"Madhya Pradesh",jabalpur:"Madhya Pradesh",ujjain:"Madhya Pradesh",sagar:"Madhya Pradesh",dewas:"Madhya Pradesh",satna:"Madhya Pradesh",ratlam:"Madhya Pradesh",rewa:"Madhya Pradesh",murwara:"Madhya Pradesh",singrauli:"Madhya Pradesh",burhanpur:"Madhya Pradesh",khandwa:"Madhya Pradesh",morena:"Madhya Pradesh",bhind:"Madhya Pradesh",vidisha:"Madhya Pradesh",chhindwara:"Madhya Pradesh",guna:"Madhya Pradesh",shivpuri:"Madhya Pradesh",mandsaur:"Madhya Pradesh",neemuch:"Madhya Pradesh",pithampur:"Madhya Pradesh",itarsi:"Madhya Pradesh",patna:"Bihar",gaya:"Bihar",bhagalpur:"Bihar",muzaffarpur:"Bihar",purnia:"Bihar",darbhanga:"Bihar","bihar sharif":"Bihar",arrah:"Bihar",begusarai:"Bihar",katihar:"Bihar",munger:"Bihar",chapra:"Bihar",sasaram:"Bihar",hajipur:"Bihar",dehri:"Bihar",bettiah:"Bihar",motihari:"Bihar",siwan:"Bihar",kishanganj:"Bihar",saharsa:"Bihar",kochi:"Kerala",thiruvananthapuram:"Kerala",kozhikode:"Kerala",thrissur:"Kerala",kollam:"Kerala",palakkad:"Kerala",alappuzha:"Kerala",malappuram:"Kerala",kannur:"Kerala",kasaragod:"Kerala",pathanamthitta:"Kerala",idukki:"Kerala",wayanad:"Kerala",ernakulam:"Kerala",kottayam:"Kerala",tirur:"Kerala",koyilandy:"Kerala",visakhapatnam:"Andhra Pradesh",vijayawada:"Andhra Pradesh",guntur:"Andhra Pradesh",nellore:"Andhra Pradesh",kurnool:"Andhra Pradesh",rajahmundry:"Andhra Pradesh",tirupati:"Andhra Pradesh",kadapa:"Andhra Pradesh",anantapur:"Andhra Pradesh",chittoor:"Andhra Pradesh",proddatur:"Andhra Pradesh",nandyal:"Andhra Pradesh",eluru:"Andhra Pradesh",ongole:"Andhra Pradesh",chilakaluripet:"Andhra Pradesh",kadiri:"Andhra Pradesh",adoni:"Andhra Pradesh",tenali:"Andhra Pradesh",chirala:"Andhra Pradesh",bapatla:"Andhra Pradesh",srikakulam:"Andhra Pradesh",vizianagaram:"Andhra Pradesh",parvathipuram:"Andhra Pradesh",bobbili:"Andhra Pradesh",chandigarh:"Chandigarh",panchkula:"Haryana",mohali:"Punjab",jammu:"Jammu and Kashmir",srinagar:"Jammu and Kashmir",leh:"Ladakh",kargil:"Ladakh",anantnag:"Jammu and Kashmir",baramulla:"Jammu and Kashmir",udhampur:"Jammu and Kashmir",kathua:"Jammu and Kashmir",rajouri:"Jammu and Kashmir",punch:"Jammu and Kashmir",doda:"Jammu and Kashmir",kishtwar:"Jammu and Kashmir",ramban:"Jammu and Kashmir",reasi:"Jammu and Kashmir",samba:"Jammu and Kashmir",bandipora:"Jammu and Kashmir",ganderbal:"Jammu and Kashmir",kulgam:"Jammu and Kashmir",pulwama:"Jammu and Kashmir",shopian:"Jammu and Kashmir",budgam:"Jammu and Kashmir",kupwara:"Jammu and Kashmir",handwara:"Jammu and Kashmir",karnah:"Jammu and Kashmir"},n=(t||"").toLowerCase().trim();return i[n]||""},g=[/(\d+)\s*(bhk|bed|beds|bedroom|bedrooms|room|rooms)/i,/(\d+)\s*(?:ka|ke)\s*(?:room|kamra|bedroom)/i,/(\d+)\s*(?:bhk|bed|room)\s*(?:ka|ke)\s*(?:flat|apartment|ghar)/i,/(?:flat|apartment|ghar)\s*(?:with|mein)\s*(\d+)\s*(?:room|bed|bhk)/i,/(\d+)\s*(?:room|bed|bhk)\s*(?:wala|wali)\s*(?:flat|apartment|ghar)/i];for(const t of g){const i=s.match(t);if(i){r.bedrooms=i[1];break}}const k=[/(\d+)\s*(bath|baths|bathroom|bathrooms|toilet|toilets)/i,/(\d+)\s*(?:ka|ke)\s*(?:bathroom|toilet|washroom)/i,/(\d+)\s*(?:bath|toilet)\s*(?:ka|ke)\s*(?:flat|apartment|ghar)/i,/(?:flat|apartment|ghar)\s*(?:with|mein)\s*(\d+)\s*(?:bath|toilet)/i,/(\d+)\s*(?:bath|toilet)\s*(?:wala|wali)\s*(?:flat|apartment|ghar)/i];for(const t of k){const i=s.match(t);if(i){r.bathrooms=i[1];break}}const f=[/(?:under|below|upto|max|maximum|up to)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:within|around|about|approximately|approx)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:budget|budget of|my budget is|looking for)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:less than|not more than|below|under)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:price|cost|rent|sale price)\s*(?:is|should be|around|about)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:affordable|cheap|low cost|economical)\s*(?:under|below|within)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:â‚¹|rs\.?|rupees?)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores)?/i,/(?:kam\s+se\s+kam|minimum|at\s+least)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:zyada\s+se\s+zyada|maximum|at\s+most)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:tak|se\s+zyada|se\s+kam)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:around|about|lagbhag|takriban)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores|rs|rupees?)?/i,/(?:budget|paisa|rupees)\s*(?:hai|mein)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores)?/i,/(?:price|dam|rate)\s*(?:hai|mein)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores)?/i];for(const t of f){const i=s.match(t);if(i){if(r.maxPrice=i[1].replace(/,/g,""),i[2]){const n=i[2].toLowerCase(),o=Number(r.maxPrice||0);(n==="k"||n==="thousand")&&(r.maxPrice=String(o*1e3)),(n==="l"||n==="lac"||n==="lakh"||n==="lakhs")&&(r.maxPrice=String(o*1e5)),(n==="cr"||n==="crore"||n==="crores")&&(r.maxPrice=String(o*1e7))}break}}const K=[/(?:above|more than|minimum|min|from)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores)?/i,/(?:starting from|starting at)\s*(\d[\d,]*)\s*(k|l|lac|lakh|cr|crore|thousand|lakhs|crores)?/i];for(const t of K){const i=s.match(t);if(i){if(r.minPrice=i[1].replace(/,/g,""),i[2]){const n=i[2].toLowerCase(),o=Number(r.minPrice||0);(n==="k"||n==="thousand")&&(r.minPrice=String(o*1e3)),(n==="l"||n==="lac"||n==="lakh"||n==="lakhs")&&(r.minPrice=String(o*1e5)),(n==="cr"||n==="crore"||n==="crores")&&(r.minPrice=String(o*1e7))}break}}const T=[/(?:near|close to|around)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:in|at|from)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:located in|situated in)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:area|locality|neighborhood)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:paas|near|ke\s+paas|ke\s+near)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:mein|in|at)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:area|ilaka|mohalla|colony)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:located|situated|hain)\s+(?:in|mein)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i,/(?:from|se)\s+([a-zA-Z\s]+?)(?:\s|$|,|\.)/i];for(const t of T){const i=s.match(t);if(i){const n=i[1].trim();if(n.length>2&&!/^(the|a|an|and|or|but|in|on|at|to|for|of|with|by)$/i.test(n)){r.city=n;break}}}r.city&&!r.state&&(r.state=m(r.city));const y=["andhra pradesh","arunachal pradesh","assam","bihar","chhattisgarh","goa","gujarat","haryana","himachal pradesh","jharkhand","karnataka","kerala","madhya pradesh","maharashtra","manipur","meghalaya","mizoram","nagaland","odisha","punjab","rajasthan","sikkim","tamil nadu","telangana","tripura","uttar pradesh","uttarakhand","west bengal","delhi","chandigarh","jammu and kashmir","ladakh"],B=s.toLowerCase(),c=y.find(t=>new RegExp(`(^|\\b)${t}(\\b|$)`).test(B));c&&(r.state=c.replace(/\b\w/g,t=>t.toUpperCase()));const A=[/\b(rent|rental|renting|for rent|to rent)\b/i,/\b(sale|sell|selling|for sale|to sell|buy|buying|purchase|purchasing)\b/i,/\b(lease|leasing|leased)\b/i,/(?:rent|kiran|bhada)\s+(?:ke\s+liye|par|mein)/i,/(?:sale|bechne|kharidne)\s+(?:ke\s+liye|par|mein)/i,/(?:for|ke\s+liye)\s+(?:rent|sale|kiran|bechne)/i,/(?:looking\s+for|chahiye|dhundh\s+raha)\s+(?:rent|sale|kiran|bechne)/i,/(?:want|chahiye)\s+(?:to\s+)?(?:rent|buy|kiran|kharid)/i,/(?:available\s+for|available)\s+(?:rent|sale|kiran|bechne)/i],x={parking:[/(?:parking|car\s+parking|vehicle\s+parking|garage)/i,/(?:parking\s+available|parking\s+space|car\s+space)/i,/(?:with\s+parking|parking\s+included)/i,/(?:parking|gaadi\s+rakhne\s+ki\s+jagah|vehicle\s+parking)/i],furnished:[/(?:furnished|fully\s+furnished|semi\s+furnished)/i,/(?:with\s+furniture|furniture\s+included)/i,/(?:ready\s+to\s+move|move\s+in\s+ready)/i,/(?:furnished|saman\s+ke\s+saath|ready\s+to\s+move)/i],unfurnished:[/(?:unfurnished|semi\s+furnished|bare)/i,/(?:without\s+furniture|no\s+furniture)/i,/(?:unfurnished|bina\s+saman\s+ke|khali)/i],garden:[/(?:garden|lawn|green\s+space|outdoor\s+space)/i,/(?:with\s+garden|garden\s+available)/i,/(?:garden|bagicha|lawn|green\s+area)/i],balcony:[/(?:balcony|terrace|veranda)/i,/(?:with\s+balcony|balcony\s+available)/i,/(?:balcony|terrace|veranda|chhat)/i],lift:[/(?:lift|elevator|elevator\s+available)/i,/(?:with\s+lift|lift\s+facility)/i,/(?:lift|elevator|lift\s+ki\s+facility)/i],security:[/(?:security|24\s*7\s*security|gated\s+community)/i,/(?:security\s+guard|security\s+system)/i,/(?:security|suraksha|guard|24\s*7\s*security)/i],gym:[/(?:gym|fitness\s+center|workout\s+area)/i,/(?:with\s+gym|gym\s+facility)/i,/(?:gym|fitness|vyayam\s+shala)/i],pool:[/(?:pool|swimming\s+pool)/i,/(?:with\s+pool|pool\s+facility)/i,/(?:pool|swimming\s+pool|tairne\s+ki\s+jagah)/i],ac:[/(?:ac|air\s+conditioning|air\s+conditioned)/i,/(?:with\s+ac|ac\s+available)/i,/(?:ac|air\s+conditioning|thandak)/i]};Object.keys(x).forEach(t=>{x[t].some(o=>o.test(s))&&(t==="furnished"&&(r.furnished=!0),t==="parking"&&(r.parking=!0),t==="offer"&&(r.offer=!0))});for(const t of A){const i=s.match(t);if(i){const n=i[1]||i[0];/rent|kiran|bhada|lease/i.test(n)?r.type="rent":/sale|bechne|kharidne|buy|purchase/i.test(n)&&(r.type="sale");break}}const j={parking:[/(?:with|having|includes?)\s+parking/i,/parking\s+(?:available|included|provided|space)/i,/(?:car\s+)?parking/i,/garage/i,/(?:covered|open)\s+parking/i,/(?:two|2)\s+wheelers?\s+parking/i,/(?:four|4)\s+wheelers?\s+parking/i,/vehicle\s+parking/i,/parking\s+lot/i,/parking\s+space/i,/(?:gaadi|car|bike|scooter)\s+(?:parking|khada|rakhne)/i,/(?:parking|khada)\s+(?:hai|available|mila)/i,/(?:covered|chhaya)\s+(?:parking|khada)/i,/(?:basement|tala)\s+(?:parking|khada)/i,/(?:open|khula)\s+(?:parking|khada)/i],furnished:[/(?:fully\s+)?furnished/i,/(?:with|having|includes?)\s+furniture/i,/furniture\s+(?:included|provided|available)/i,/(?:semi\s+)?furnished/i,/(?:partially\s+)?furnished/i,/(?:well\s+)?furnished/i,/(?:beautifully\s+)?furnished/i,/(?:modern\s+)?furniture/i,/(?:wooden\s+)?furniture/i,/(?:ready\s+to\s+move\s+in|rtmi)/i,/(?:furnished|sajavata|sajaya|sajaya\s+hua)/i,/(?:furniture|samagri|saman)\s+(?:hai|available|mila)/i,/(?:ready|taiyar)\s+(?:to\s+move|rehne|rahan)/i,/(?:fully|puri\s+tarah|bilkul)\s+(?:furnished|sajaya)/i,/(?:semi|aadha|thoda)\s+(?:furnished|sajaya)/i,/(?:modern|naya|latest)\s+(?:furniture|samagri)/i],unfurnished:[/unfurnished/i,/(?:without|no)\s+furniture/i,/bare\s+apartment/i,/(?:empty|vacant)\s+apartment/i,/(?:not\s+)?furnished/i,/(?:without\s+)?furniture/i,/(?:unfurnished|khali|saman\s+nahi)/i,/(?:without|bina)\s+(?:furniture|samagri)/i,/(?:empty|khali)\s+(?:flat|apartment|ghar)/i,/(?:bare|nanga)\s+(?:flat|apartment)/i,/(?:no|nahi)\s+(?:furniture|samagri)/i],offer:[/(?:special\s+)?offer/i,/discount/i,/deal/i,/promotion/i,/(?:reduced|lower)\s+price/i,/(?:cheap|affordable|budget)/i,/(?:best\s+)?deal/i,/(?:great\s+)?offer/i,/(?:limited\s+time\s+)?offer/i,/(?:exclusive\s+)?offer/i,/(?:flash\s+)?sale/i,/(?:clearance\s+)?sale/i,/(?:offer|sasta|kam\s+dam)/i,/(?:discount|chhut|bargain)/i,/(?:deal|sasta\s+deal|achha\s+deal)/i,/(?:cheap|sasta|kam\s+price)/i,/(?:affordable|paisa\s+vasool|value\s+for\s+money)/i,/(?:budget|kam\s+budget|sasta)/i,/(?:special|khas|limited)\s+(?:offer|deal)/i]};j.parking.some(t=>t.test(s))?r.parking=!0:/no\s+parking|without\s+parking/i.test(s)&&(r.parking=!1),j.furnished.some(t=>t.test(s))?r.furnished=!0:j.unfurnished.some(t=>t.test(s))&&(r.furnished=!1),j.offer.some(t=>t.test(s))&&(r.offer=!0),/small|compact|studio|1\s*bhk/i.test(s)?r.bedrooms="1":/medium|2\s*bhk|3\s*bhk/i.test(s)?r.bedrooms="2":/large|big|4\s*bhk|5\s*bhk/i.test(s)&&(r.bedrooms="4"),/urgent|immediate|asap|quick|fast/i.test(s)&&(r.sort="createdAt",r.order="desc");const Z=new URLSearchParams(r);S(`?${Z.toString()}`)},D=async()=>{try{const e=new URLSearchParams(w.search);e.set("startIndex",b.length);const s=await fetch(`${$}/api/listing/get?${e.toString()}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=await s.json();Array.isArray(r)&&(P(l=>[...l,...r]),N(r.length>=8))}catch(e){console.error("Error fetching more listings:",e)}},F=e=>{C(e),p(s=>({...s,state:e.state,district:e.district,city:e.city}))};return v?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading properties..."})]})}):a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen py-10 px-2 md:px-8",children:[a.jsxs("div",{className:"max-w-6xl mx-auto bg-white rounded-xl shadow-lg p-6 relative",children:[a.jsx("h3",{className:"text-3xl font-extrabold text-blue-700 mb-6 text-center drop-shadow",children:"Explore Properties"}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl mb-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),a.jsx("label",{className:"text-lg font-semibold text-blue-800",children:"Smart Search (Natural Language)"})]}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{value:H,onChange:e=>W(e.target.value),placeholder:"2BHK under 15k near Delhi Metro, furnished with parking",className:"w-full p-4 border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200 text-lg pr-24 md:pr-4 placeholder:text-sm md:placeholder:text-base"}),a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 hidden md:block",children:a.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-6 py-2 rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all duration-200 transform hover:scale-105 shadow-lg font-semibold",children:"Search"})})]}),a.jsx("div",{className:"md:hidden",children:a.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all duration-200 transform hover:scale-105 shadow-lg font-semibold text-sm",children:"Search"})}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Try:"}),["3BHK under 25L in Mumbai","2BHK with parking in Bangalore","Furnished apartment near metro","Budget house for rent in Pune"].map((e,s)=>a.jsx("button",{type:"button",onClick:()=>W(e),className:"text-xs bg-white border border-blue-300 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-50 transition-colors duration-200",children:e},s))]})]})]}),a.jsxs("form",{onSubmit:E,className:"grid md:grid-cols-2 gap-4 bg-gray-100 p-4 rounded-lg mb-6",children:[a.jsx("input",{type:"text",name:"searchTerm",placeholder:"Search...",value:h.searchTerm,onChange:d,className:"p-2 border rounded-md w-full"}),a.jsxs("select",{name:"sort_order",onChange:e=>{const[s,r]=e.target.value.split("_");p(l=>({...l,sort:s,order:r}))},value:`${h.sort}_${h.order}`,className:"p-2 border rounded-md w-full",children:[a.jsx("option",{value:"regularPrice_desc",children:"Price high to low"}),a.jsx("option",{value:"regularPrice_asc",children:"Price low to high"}),a.jsx("option",{value:"createdAt_desc",children:"Latest"}),a.jsx("option",{value:"createdAt_asc",children:"Oldest"})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(aa,{value:G,onChange:F,mode:"search"})}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:"type",value:"all",checked:h.type==="all",onChange:d})," ","All"]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:"type",value:"rent",checked:h.type==="rent",onChange:d})," ","Rent"]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:"type",value:"sale",checked:h.type==="sale",onChange:d})," ","Sale"]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",name:"parking",onChange:d,checked:h.parking})," ","Parking"]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",name:"furnished",onChange:d,checked:h.furnished})," ","Furnished"]}),a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",name:"offer",onChange:d,checked:h.offer})," ","Offer"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",name:"minPrice",placeholder:"Min Price",value:h.minPrice,onChange:d,className:"p-2 border rounded-md w-full",min:0}),a.jsx("input",{type:"number",name:"maxPrice",placeholder:"Max Price",value:h.maxPrice,onChange:d,className:"p-2 border rounded-md w-full",min:0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",name:"bedrooms",placeholder:"Bedrooms",value:h.bedrooms,onChange:d,className:"p-2 border rounded-md w-full",min:1}),a.jsx("input",{type:"number",name:"bathrooms",placeholder:"Bathrooms",value:h.bathrooms,onChange:d,className:"p-2 border rounded-md w-full",min:1})]}),a.jsxs("button",{type:"submit",className:"md:col-span-2 w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all transform hover:scale-105 shadow-lg font-semibold flex items-center justify-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-4-4m0 0A7 7 0 104 4a7 7 0 0013 13z"})}),"Search"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Listings"}),v&&a.jsx("p",{className:"text-center text-lg font-semibold text-blue-600 animate-pulse",children:"Loading..."}),M&&a.jsx("p",{className:"text-center text-red-600 text-lg mb-4",children:M}),!v&&!M&&b.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx("img",{src:V,alt:"No listings found",className:"w-72 h-72 object-contain mx-auto mb-0"}),a.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Listings Found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your search criteria or filters"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b&&b.map(e=>a.jsx(z,{listing:e},e._id))}),J&&a.jsx("div",{className:"flex justify-center mt-4",children:a.jsx("button",{type:"button",onClick:D,className:"mt-4 bg-gray-600 text-white p-2 rounded-md w-500",children:"Show More"})})]}),R.length>0&&a.jsxs("div",{className:"mt-10",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Recommended for you"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:R.map(e=>a.jsx(z,{listing:e},e._id))})]})]}),a.jsx(X,{}),a.jsx(Y,{})]})}export{da as default};
